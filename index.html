<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rocket Sled - Newton's Laws Simulation</title>
    <meta name="description"
        content="Interactive physics simulation demonstrating Newton's Laws with a rocket sled. Explore forces, friction, and air drag effects on motion.">
    <link rel="stylesheet" href="src/css/app.css?v=20260202v9">
</head>

<body>
    <!-- Header -->
    <header class="app-header">
        <div class="header-left">
            <h1>üöÄ Rocket Sled Simulation</h1>
            <p class="author">By Vladimir Lopez</p>
        </div>
        <div class="header-right">
            <button id="helpBtn" class="header-btn">‚ùì Help</button>
        </div>
    </header>

    <div class="container">
        <main>
            <!-- LEFT PANEL: Controls -->
            <aside class="controls-section">
                <h2>‚öôÔ∏è Controls</h2>

                <!-- Instructions -->
                <div class="instructions">
                    <h3>üìñ How to Use:</h3>
                    <ol>
                        <li>Use <strong>thrust buttons</strong> to apply force</li>
                        <li>Toggle <strong>Friction</strong> and <strong>Air Drag</strong></li>
                        <li>Observe the <strong>force diagram</strong> on the sled</li>
                        <li>Watch the <strong>speedometer</strong> respond</li>
                    </ol>
                </div>

                <!-- Force Controls -->
                <div class="force-controls">
                    <h3>üî• Max Force</h3>

                    <!-- Force Magnitude (max force) Slider -->
                    <div class="force-slider">
                        <label for="maxForceSlider">
                            <span>Maximum Thrust</span>
                            <span id="maxForceValue" class="value-display">2000 N</span>
                        </label>
                        <input type="range" id="maxForceSlider" min="500" max="5000" value="2000" step="100">
                    </div>
                </div>

                <!-- Resistance Toggles -->
                <div class="toggles-section">
                    <h3>üõë Resistance Forces</h3>
                    <div class="toggle-group">
                        <div class="toggle-item">
                            <label for="frictionToggle">
                                <span class="icon">üî©</span>
                                <span>Friction</span>
                            </label>
                            <div class="toggle-switch">
                                <input type="checkbox" id="frictionToggle">
                                <span class="toggle-slider"></span>
                            </div>
                        </div>
                        <div class="toggle-item">
                            <label for="airDragToggle">
                                <span class="icon">üí®</span>
                                <span>Air Drag</span>
                            </label>
                            <div class="toggle-switch">
                                <input type="checkbox" id="airDragToggle">
                                <span class="toggle-slider"></span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Worksheet Scenarios -->
                <div class="scenarios-section">
                    <h3>üìã Worksheet Setups</h3>
                    <div class="scenario-buttons">
                        <button class="scenario-btn" data-scenario="no-forces" title="No friction, no air drag">
                            <span class="scenario-icon">üöÄ</span>
                            <span class="scenario-name">No Resistance</span>
                        </button>
                        <button class="scenario-btn" data-scenario="friction-only"
                            title="Friction enabled, no air drag">
                            <span class="scenario-icon">üî©</span>
                            <span class="scenario-name">Friction Only</span>
                        </button>
                        <button class="scenario-btn" data-scenario="air-only" title="Air drag enabled, no friction">
                            <span class="scenario-icon">üí®</span>
                            <span class="scenario-name">Air Drag Only</span>
                        </button>
                        <button class="scenario-btn" data-scenario="all-forces" title="Both friction and air drag">
                            <span class="scenario-icon">‚ö°</span>
                            <span class="scenario-name">All Forces</span>
                        </button>
                        <button class="scenario-btn" data-scenario="terminal-velocity"
                            title="High speed with air drag to show terminal velocity">
                            <span class="scenario-icon">üèéÔ∏è</span>
                            <span class="scenario-name">Terminal Velocity</span>
                        </button>
                        <button class="scenario-btn" data-scenario="equilibrium"
                            title="Balance forces for zero acceleration">
                            <span class="scenario-icon">‚öñÔ∏è</span>
                            <span class="scenario-name">Equilibrium</span>
                        </button>
                    </div>
                </div>

                <!-- Control Buttons -->
                <div class="control-buttons">
                    <button id="resetBtn" class="btn-secondary">
                        <span>üîÑ</span> Reset
                    </button>
                </div>
            </aside>

            <!-- CENTER PANEL: Visualization -->
            <section class="visualization-section">
                <h2>üìä Simulation</h2>

                <div class="viz-controls">
                    <button id="forceArrowsBtn" class="viz-btn">üìä Force Arrows</button>
                    <button id="gridBtn" class="viz-btn">üìê Grid</button>
                </div>

                <div id="canvasContainer"></div>

                <!-- Direction Slider (below the sled) -->
                <div class="direction-control">
                    <div class="direction-slider-container">
                        <div class="slider-labels">
                            <span>‚Üê Left</span>
                            <span>OFF</span>
                            <span>Right ‚Üí</span>
                        </div>
                        <input type="range" id="directionSlider" min="-1000" max="1000" value="0" step="1">
                        <div class="slider-value">
                            <span>Applied Force: </span>
                            <span id="forceValue" class="force-number">0 N</span>
                        </div>
                    </div>
                </div>
            </section>

            <!-- RIGHT PANEL: Data Display -->
            <aside class="data-section">
                <h2>üìà Data</h2>

                <!-- Force Values Display -->
                <div class="force-values">
                    <h3>Force Values</h3>
                    <div class="force-value-item applied">
                        <span class="force-label">Applied Force:</span>
                        <span id="appliedForceValue" class="force-number">0 N</span>
                    </div>
                    <div class="force-value-item friction">
                        <span class="force-label">Friction Force:</span>
                        <span id="frictionForceValue" class="force-number">0 N</span>
                    </div>
                    <div class="force-value-item air">
                        <span class="force-label">Air Drag Force:</span>
                        <span id="airDragForceValue" class="force-number">0 N</span>
                    </div>
                    <div class="force-value-item net">
                        <span class="force-label">Net Force:</span>
                        <span id="netForceValue" class="force-number bold">0 N</span>
                    </div>
                </div>

                <!-- Velocimeter -->
                <div class="velocimeter">
                    <h3>‚ö° Velocimeter</h3>
                    <div class="velocimeter-gauge">
                        <div id="velocimeterNeedle" class="needle"></div>
                        <div class="gauge-labels">
                            <span class="left">-50</span>
                            <span class="center">0</span>
                            <span class="right">50</span>
                        </div>
                    </div>
                    <div id="velocityDisplay" class="velocity-value">0.0 <span class="unit">m/s</span></div>
                </div>

                <!-- Force Legend -->
                <div class="force-legend">
                    <h3>Force Legend</h3>
                    <div class="legend-items">
                        <div class="legend-item">
                            <div class="legend-color applied"></div>
                            <span>F<sub>push</sub> on Sled by Rockets</span>
                        </div>
                        <div class="legend-item">
                            <div class="legend-color normal"></div>
                            <span>F<sub>normal</sub> on Sled by Ground</span>
                        </div>
                        <div class="legend-item">
                            <div class="legend-color gravity"></div>
                            <span>F<sub>gravity</sub> on Sled by Earth</span>
                        </div>
                        <div id="legendFriction" class="legend-item inactive">
                            <div class="legend-color friction"></div>
                            <span>F<sub>friction</sub> on Sled by Ground</span>
                        </div>
                        <div id="legendAir" class="legend-item inactive">
                            <div class="legend-color air"></div>
                            <span>F<sub>drag</sub> on Sled by Air</span>
                        </div>
                    </div>
                </div>

                <!-- Physics Tips -->
                <div class="tips-section">
                    <h3>üí° Physics Tips</h3>
                    <ul>
                        <li>With no friction: object in motion stays in motion!</li>
                        <li>Friction and air drag always oppose motion</li>
                        <li>Reversing thrust doesn't instantly reverse velocity</li>
                        <li>Try: Get to red zone, reverse thrust, watch inertia!</li>
                    </ul>
                </div>

                <!-- Pedagogical Tools -->
                <div class="quiz-section" style="margin-top: 20px;">
                    <button id="quizBtn" class="btn-primary" style="width: 100%; background: #9C27B0;">
                        <span>‚ùì</span> Check Understanding
                    </button>
                </div>
            </aside>
        </main>
    </div>

    <!-- Help Modal -->
    <div id="helpModal" class="modal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <h2>üöÄ Rocket Sled Instructions</h2>
            <div class="modal-body">
                <h3>Goal</h3>
                <p>Learn how forces affect motion using Newton's Laws.</p>

                <h3>Controls</h3>
                <ul>
                    <li><strong>Slider / Arrow Keys:</strong> Control the thrust form the rockets. Left/Right direction.
                    </li>
                    <li><strong>Friction Toggle:</strong> Turn on ground friction (opposes sliding).</li>
                    <li><strong>Air Drag Toggle:</strong> Turn on air resistance (increases with speed).</li>
                </ul>

                <h3>Challenges to Try</h3>
                <ol>
                    <li><strong>Newton's 1st Law:</strong> Turn OFF friction/drag. Get the sled moving, then turn thrust
                        OFF. What happens?</li>
                    <li><strong>Terminal Velocity:</strong> Turn ON air drag. Apply full force. Does speed increase
                        forever?</li>
                    <li><strong>Equilibrium:</strong> Can you find a force setting where the sled moves at CONSTANT
                        speed with friction on?</li>
                </ol>
            </div>
        </div>
    </div>

    <!-- Quiz Modal -->
    <div id="quizModal" class="modal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <h2>üß† Physics Knowledge Check</h2>
            <div id="quizContainer">
                <!-- Question 1 -->
                <div class="quiz-question active" data-q="1">
                    <h3>Question 1/3</h3>
                    <p>If the sled is moving to the RIGHT, which way does Friction point?</p>
                    <div class="quiz-options">
                        <button class="quiz-opt" onclick="checkAnswer(this, false)">Right (with motion)</button>
                        <button class="quiz-opt" onclick="checkAnswer(this, true)">Left (opposing motion)</button>
                        <button class="quiz-opt" onclick="checkAnswer(this, false)">Up (perpendicular)</button>
                    </div>
                    <div class="feedback"></div>
                    <button class="next-btn hidden" onclick="nextQuestion(1)">Next ‚û°Ô∏è</button>
                </div>

                <!-- Question 2 -->
                <div class="quiz-question" data-q="2">
                    <h3>Question 2/3</h3>
                    <p>If you turn OFF the rockets while moving on frictionless ice (no drag), what happens?</p>
                    <div class="quiz-options">
                        <button class="quiz-opt" onclick="checkAnswer(this, false)">It stops immediately</button>
                        <button class="quiz-opt" onclick="checkAnswer(this, false)">It slowly slows down</button>
                        <button class="quiz-opt" onclick="checkAnswer(this, true)">It creates constant velocity
                            forever</button>
                    </div>
                    <div class="feedback"></div>
                    <button class="next-btn hidden" onclick="nextQuestion(2)">Next ‚û°Ô∏è</button>
                </div>

                <!-- Question 3 -->
                <div class="quiz-question" data-q="3">
                    <h3>Question 3/3</h3>
                    <p>When the Net Force is ZERO, what is the acceleration?</p>
                    <div class="quiz-options">
                        <button class="quiz-opt" onclick="checkAnswer(this, true)">Zero (0 m/s¬≤)</button>
                        <button class="quiz-opt" onclick="checkAnswer(this, false)">Positive</button>
                        <button class="quiz-opt" onclick="checkAnswer(this, false)">Negative</button>
                    </div>
                    <div class="feedback"></div>
                    <button class="next-btn hidden" onclick="closeQuiz()">Finish üéâ</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="app-footer">
        <p>¬© 2025 Vladimir Lopez. Licensed under the MIT License.
            <a href="https://github.com/vladimirlopez" target="_blank" rel="noopener">View on GitHub</a>
        </p>
    </footer>

    <!-- p5.js Library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.7.0/p5.min.js"></script>

    <!-- Physics Engine -->
    <script src="src/js/physics.js?v=20260202v9"></script>

    <!-- Visualization (p5.js sketch) -->
    <script src="src/js/visualization.js?v=20260202v9"></script>

    <!-- Main Application Controller -->
    <script src="src/js/main.js?v=20260202v9"></script>
</body>

</html>