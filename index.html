<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rocket Sled - Newton's Laws Simulation</title>
    <meta name="description"
        content="Interactive physics simulation demonstrating Newton's Laws with a rocket sled. Explore forces, friction, and air drag effects on motion.">
    <link rel="icon" type="image/png" href="favicon.png">
    <link rel="stylesheet" href="src/css/app.css?v=20260203v19">
</head>

<body>
    <!-- Header -->
    <header class="app-header">
        <div class="header-left">
            <h1>üöÄ Rocket Sled Simulation</h1>
            <p class="author">By Vladimir Lopez</p>
        </div>
        <div class="header-right">
            <button id="quizBtn" class="header-btn quiz-btn">‚ùì Check Understanding</button>
            <button id="helpBtn" class="header-btn">üí° Help</button>
        </div>
    </header>

    <div class="container">
        <main>
            <!-- LEFT PANEL: Controls -->
            <aside class="controls-section">
                <h2>‚öôÔ∏è Controls</h2>

                <!-- Instructions -->
                <div class="instructions">
                    <h3>üìñ How to Use:</h3>
                    <ol>
                        <li>Use <strong>thrust buttons</strong> to apply force</li>
                        <li>Toggle <strong>Friction</strong> and <strong>Air Drag</strong></li>
                        <li>Observe the <strong>force diagram</strong> on the sled</li>
                        <li>Watch the <strong>speedometer</strong> respond</li>
                    </ol>
                </div>

                <!-- Force Controls -->
                <div class="force-controls">
                    <h3>üî• Max Force</h3>

                    <!-- Force Magnitude (max force) Slider -->
                    <div class="force-slider">
                        <label for="maxForceSlider">
                            <span>Maximum Thrust</span>
                            <span id="maxForceValue" class="value-display">2000 N</span>
                        </label>
                        <input type="range" id="maxForceSlider" min="500" max="5000" value="2000" step="100">
                    </div>
                </div>

                <!-- Resistance Toggles -->
                <div class="toggles-section">
                    <h3>üõë Resistance Forces</h3>
                    <div class="toggle-group">
                        <div class="toggle-item">
                            <label for="frictionToggle">
                                <span class="icon">üî©</span>
                                <span>Friction</span>
                            </label>
                            <div class="toggle-switch">
                                <input type="checkbox" id="frictionToggle">
                                <span class="toggle-slider"></span>
                            </div>
                        </div>

                        <!-- Friction Slider -->
                        <div class="friction-control-panel" style="padding: 0 4px 12px 36px;">
                            <div
                                style="display: flex; justify-content: space-between; font-size: 0.85em; margin-bottom: 4px; color: #aaa;">
                                <span>Roughness (¬µ)</span>
                                <span id="frictionCoeffValue" style="color: white; font-family: monospace;">0.15</span>
                            </div>
                            <input type="range" id="frictionSlider" min="0.0" max="1.0" step="0.05" value="0.15"
                                style="width: 100%; cursor: pointer;">
                        </div>

                        <div class="toggle-item">
                            <label for="airDragToggle">
                                <span class="icon">üí®</span>
                                <span>Air Drag</span>
                            </label>
                            <div class="toggle-switch">
                                <input type="checkbox" id="airDragToggle">
                                <span class="toggle-slider"></span>
                            </div>
                        </div>
                    </div>
                </div>


            </aside>

            <!-- CENTER PANEL: Visualization -->
            <section class="visualization-section">
                <h2>üìä Simulation</h2>

                <div class="viz-controls">
                    <button id="forceArrowsBtn" class="viz-btn">üìä Force Arrows</button>
                    <button id="gridBtn" class="viz-btn">üìê Grid</button>

                    <!-- Presets Dropdown Menu -->
                    <div class="dropdown-container">
                        <button id="menuBtn" class="viz-btn menu-btn">üìã Presets ‚ñº</button>
                        <div id="dropdownMenu" class="dropdown-menu">
                            <div class="menu-section">
                                <button class="menu-item scenario-btn" data-scenario="no-forces"
                                    title="No friction, no air drag">
                                    üöÄ No Resistance
                                </button>
                                <button class="menu-item scenario-btn" data-scenario="friction-only"
                                    title="Friction enabled, no air drag">
                                    üî© Friction Only
                                </button>
                                <button class="menu-item scenario-btn" data-scenario="air-only"
                                    title="Air drag enabled, no friction">
                                    üí® Air Drag Only
                                </button>
                                <button class="menu-item scenario-btn" data-scenario="all-forces"
                                    title="Both friction and air drag">
                                    ‚ö° All Forces
                                </button>
                                <button class="menu-item scenario-btn" data-scenario="terminal-velocity"
                                    title="High speed with air drag to show terminal velocity">
                                    üèéÔ∏è Terminal Velocity
                                </button>
                                <button class="menu-item scenario-btn" data-scenario="equilibrium"
                                    title="Balance forces for zero acceleration">
                                    ‚öñÔ∏è Equilibrium
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Action Buttons -->
                    <button id="resetBtn" class="viz-btn">üîÑ Reset</button>
                </div>

                <div id="canvasContainer">
                    <!-- HUD Overlay -->
                    <div class="hud-layer">
                        <!-- Top Left: Force Values -->
                        <div class="hud-panel hud-top-left">
                            <div class="force-row"><span class="label applied">Push:</span> <span
                                    id="appliedForceValue">0 N</span></div>
                            <div class="force-row"><span class="label friction">Friction:</span> <span
                                    id="frictionForceValue">0 N</span></div>
                            <div class="force-row"><span class="label air">Drag:</span> <span id="airDragForceValue">0
                                    N</span></div>
                            <div class="force-row divider"><span class="label net">Net:</span> <span
                                    id="netForceValue">0 N</span></div>
                        </div>

                        <!-- Top Right: Velocimeter -->
                        <div class="hud-panel hud-top-right">
                            <div class="velocimeter-compact">
                                <div id="velocityDisplay" class="velocity-value">0.0 <span class="unit">m/s</span></div>
                                <div class="velocimeter-gauge-mini">
                                    <div id="velocimeterNeedle" class="needle"></div>
                                </div>
                            </div>
                        </div>

                        <!-- Bottom Left: Legend -->
                        <div class="hud-panel hud-bottom-left">
                            <div class="legend-compact">
                                <div class="legend-item">
                                    <div class="dot applied"></div> Push
                                </div>
                                <div class="legend-item" id="legendFriction">
                                    <div class="dot friction"></div> Friction
                                </div>
                                <div class="legend-item" id="legendAir">
                                    <div class="dot air"></div> Drag
                                </div>
                                <div class="legend-item">
                                    <div class="dot normal"></div> Normal
                                </div>
                                <div class="legend-item">
                                    <div class="dot gravity"></div> Gravity
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Direction Slider (below the sled) -->
                <div class="direction-control">
                    <div class="direction-slider-container">
                        <div class="slider-labels">
                            <span>‚Üê Left</span>
                            <span>OFF</span>
                            <span>Right ‚Üí</span>
                        </div>
                        <input type="range" id="directionSlider" min="-1000" max="1000" value="0" step="1">
                        <div class="slider-value">
                            <span>Applied Force: </span>
                            <span id="forceValue" class="force-number">0 N</span>
                            <button id="cutEnginesBtn" class="btn-secondary"
                                style="margin-left: 15px; padding: 4px 10px; font-size: 0.85em; border-radius: 4px;">
                                üö´ Cut Engines
                            </button>
                        </div>
                    </div>
                </div>
            </section>


        </main>
    </div>

    <!-- Help Modal -->
    <div id="helpModal" class="modal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <h2>üöÄ Rocket Sled Instructions</h2>
            <div class="modal-body">
                <h3>Goal</h3>
                <p>Learn how forces affect motion using Newton's Laws.</p>

                <h3>Controls</h3>
                <ul>
                    <li><strong>Slider / Arrow Keys:</strong> Control the thrust form the rockets. Left/Right direction.
                    </li>
                    <li><strong>Friction Toggle:</strong> Turn on ground friction (opposes sliding).</li>
                    <li><strong>Air Drag Toggle:</strong> Turn on air resistance (increases with speed).</li>
                </ul>

                <h3>Challenges to Try</h3>
                <ol>
                    <li><strong>Newton's 1st Law:</strong> Turn OFF friction/drag. Get the sled moving, then turn thrust
                        OFF. What happens?</li>
                    <li><strong>Terminal Velocity:</strong> Turn ON air drag. Apply full force. Does speed increase
                        forever?</li>
                    <li><strong>Equilibrium:</strong> Can you find a force setting where the sled moves at CONSTANT
                        speed with friction on?</li>
                </ol>
            </div>
        </div>
    </div>

    <!-- Quiz Modal -->
    <div id="quizModal" class="modal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <h2>üß† Physics Knowledge Check</h2>
            <div id="quizContainer">
                <!-- Question 1 -->
                <div class="quiz-question active" data-q="1">
                    <h3>Question 1/3</h3>
                    <p>If the sled is moving to the RIGHT, which way does Friction point?</p>
                    <div class="quiz-options">
                        <button class="quiz-opt" onclick="checkAnswer(this, false)">Right (with motion)</button>
                        <button class="quiz-opt" onclick="checkAnswer(this, true)">Left (opposing motion)</button>
                        <button class="quiz-opt" onclick="checkAnswer(this, false)">Up (perpendicular)</button>
                    </div>
                    <div class="feedback"></div>
                    <button class="next-btn hidden" onclick="nextQuestion(1)">Next ‚û°Ô∏è</button>
                </div>

                <!-- Question 2 -->
                <div class="quiz-question" data-q="2">
                    <h3>Question 2/3</h3>
                    <p>If you turn OFF the rockets while moving on frictionless ice (no drag), what happens?</p>
                    <div class="quiz-options">
                        <button class="quiz-opt" onclick="checkAnswer(this, false)">It stops immediately</button>
                        <button class="quiz-opt" onclick="checkAnswer(this, false)">It slowly slows down</button>
                        <button class="quiz-opt" onclick="checkAnswer(this, true)">It creates constant velocity
                            forever</button>
                    </div>
                    <div class="feedback"></div>
                    <button class="next-btn hidden" onclick="nextQuestion(2)">Next ‚û°Ô∏è</button>
                </div>

                <!-- Question 3 -->
                <div class="quiz-question" data-q="3">
                    <h3>Question 3/3</h3>
                    <p>When the Net Force is ZERO, what is the acceleration?</p>
                    <div class="quiz-options">
                        <button class="quiz-opt" onclick="checkAnswer(this, true)">Zero (0 m/s¬≤)</button>
                        <button class="quiz-opt" onclick="checkAnswer(this, false)">Positive</button>
                        <button class="quiz-opt" onclick="checkAnswer(this, false)">Negative</button>
                    </div>
                    <div class="feedback"></div>
                    <button class="next-btn hidden" onclick="closeQuiz()">Finish üéâ</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="app-footer">
        <p>¬© 2025 Vladimir Lopez. Licensed under the MIT License.
            <a href="https://github.com/vladimirlopez" target="_blank" rel="noopener">View on GitHub</a>
        </p>
    </footer>

    <!-- p5.js Library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.7.0/p5.min.js"></script>

    <!-- Physics Engine -->
    <script src="src/js/physics.js?v=20260203v19"></script>

    <!-- Visualization (p5.js sketch) -->
    <script src="src/js/visualization.js?v=20260203v19"></script>

    <!-- Main Application Controller -->
    <script src="src/js/main.js?v=20260203v19"></script>
</body>

</html>